// Generated by CoffeeScript 1.7.1
(function() {
  var app, express, getItem, http, path, port, setItem;

  http = require('http');

  express = require('express');

  path = require('path');

  app = express();

  app.use(express["static"](path.join(__dirname + '/../public')));

  app.use(express["static"](path.join(__dirname + '/../bower_components')));

  port = Number(process.env.PORT || 5000);

  app.get('/', function(req, res) {
    console.log("GET index");
    return res.render('index');
  });

  app.get('/sites', function(req, response) {
    console.log("GET sites");
    response.header("Content-Type", "application/json");
    return response.sendFile(path.join(__dirname, '../config', 'sites.json'));
  });

  app.get('/check', function(req, response) {
    var request, res, site;
    site = {};
    site.url = req.param("url");
    site.name = req.param("name");
    site.index = req.param("index");
    request = require('sync-request');
    try {
      res = request("GET", site.url);
    } catch (_error) {
      res = {};
      res.statusCode = 404;
    }
    site.statusCode = res.statusCode;
    response.header("Content-Type", "application/json");
    return response.send(JSON.stringify(site));
  });

  setItem = function(key, value) {};

  getItem = function(key) {};

  app.listen(port);

  console.log("started on port: " + port);

}).call(this);
