// Generated by CoffeeScript 1.7.1
(function() {
  var app, bodyParser, config, express, http, logfmt, path, port;

  http = require('http');

  express = require('express');

  bodyParser = require('body-parser');

  path = require('path');

  logfmt = require('logfmt');

  config = require(path.join(__dirname, 'config'));

  app = express();

  app.use(bodyParser());

  app.use(logfmt.requestLogger());

  app.use(express["static"](__dirname + '../public'));

  port = Number(process.env.PORT || 5000);

  app.get('/', function(req, res) {
    console.log("GET index");
    return res.sendFile(path.join(__dirname, '../public', 'index.html'));
  });

  app.get('/check', function(req, response) {
    var request, res, site;
    site = {};
    site.url = req.param("url");
    site.name = req.param("name");
    site.index = req.param("index");
    request = require('sync-request');
    try {
      res = request("GET", site.url);
    } catch (_error) {
      res = {};
      res.statusCode = 404;
    }
    site.statusCode = res.statusCode;
    response.header("Content-Type", "application/json");
    return response.send(JSON.stringify(site));
  });

  app.listen(port);

  console.log("started on port: " + port);

}).call(this);
